<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdn.jsdelivr.net/npm/@observablehq/plot@0.4"></script>
    <title>Charts</title>
</head>
<body>
<script type="text/javascript">
    function render(renderInput) {
        let height = 576;
        let width = 1024;
        let marginLeft = 100;
        let marginRight = 50;
        const data = JSON.parse(renderInput);

        function createChartDic(id) {
            let div = document.createElement("div");
            div.id = id
            div.style.textAlign = "center"
            div.style.margin = "0 auto"
            div.style.width = `${width + marginLeft + marginRight}px`
            return div;
        }

        for (let idx in data) {
            let benchResults = data[idx]
            let div = createChartDic(benchResults.ID);
            div.innerHTML = `<p style="font-family: sans-serif;text-align: center;">${benchResults.Options.title || benchResults.Name}</p>`
            div.append(Plot.plot({
                marginLeft: marginLeft,
                marginRight: marginRight,
                width: width,
                height: height,
                x: {
                    label: benchResults.Options.xAxisName || 'X',
                    grid: true,
                    type: benchResults.Options.xAxisType || 'linear'
                },
                y: {
                    label: `${benchResults.YAxisLabel}`,
                    grid: true,
                    type: benchResults.Options.yAxisType || 'linear'
                },
                color: {
                    legend: true,
                },
                marks: Object.entries(benchResults.Cases).flatMap(([caseName, caseData]) => {
                    caseData.forEach(point => {
                        point.Error = parseFloat(point.Error)
                        point.X = parseFloat(point.X)
                        point.Y = parseFloat(point.Y)
                        point.YOne = point.Y - point.Error - 0.00000001
                        point.YTwo = point.Y + point.Error + 0.00000001
                        point.Name = caseName
                    });
                    return [
                        Plot.line(caseData, {x: "X", y: "Y", stroke: "Name", strokeOpacity: 0.5}),
                        Plot.area(caseData, {
                            x1: "X",
                            y1: "YOne",
                            y2: "YTwo",
                            fill: "Name",
                            fillOpacity: 0.5
                        }),
                        Plot.dot(caseData, {x: "X", y: "Y", fill: "Name"}),
                        Plot.ruleY([0]), Plot.ruleX([0])];
                })
            }));
            div.append(document.createElement("hr"))
            document.body.append(div);
        }
    }

    const input = `[
  {
    "ID": "69bb292c059c01497438571618c93f9199dc8fe329689eb6eb0fb3bd7c32495e",
    "Name": "ChanThroughput pCnt=1 cCnt=8",
    "YAxisLabel": "time/op (ns/op)",
    "Cases": {
      "standard": [
        {
          "X": "1",
          "Y": "1.62400E+02",
          "Error": "1.624"
        },
        {
          "X": "2",
          "Y": "1.44200E+02",
          "Error": "0"
        },
        {
          "X": "4",
          "Y": "1.26040E+02",
          "Error": "1.2604000000000002"
        },
        {
          "X": "8",
          "Y": "1.07300E+02",
          "Error": "0"
        },
        {
          "X": "16",
          "Y": "9.90780E+01",
          "Error": "0.9907800000000001"
        },
        {
          "X": "32",
          "Y": "1.06340E+02",
          "Error": "1.0634000000000001"
        },
        {
          "X": "64",
          "Y": "9.48860E+01",
          "Error": "0.9488599999999999"
        },
        {
          "X": "128",
          "Y": "9.35540E+01",
          "Error": "0"
        },
        {
          "X": "256",
          "Y": "9.12500E+01",
          "Error": "0"
        },
        {
          "X": "512",
          "Y": "8.73580E+01",
          "Error": "0"
        },
        {
          "X": "1024",
          "Y": "8.61500E+01",
          "Error": "0"
        }
      ],
      "thp": [
        {
          "X": "1",
          "Y": "2.28720E+02",
          "Error": "9.1488"
        },
        {
          "X": "2",
          "Y": "1.23360E+02",
          "Error": "2.4672"
        },
        {
          "X": "4",
          "Y": "6.58440E+01",
          "Error": "1.3168799999999998"
        },
        {
          "X": "8",
          "Y": "3.51500E+01",
          "Error": "1.406"
        },
        {
          "X": "16",
          "Y": "1.92580E+01",
          "Error": "0.5777399999999999"
        },
        {
          "X": "32",
          "Y": "1.20025E+01",
          "Error": "0"
        },
        {
          "X": "64",
          "Y": "7.87080E+00",
          "Error": "0"
        },
        {
          "X": "128",
          "Y": "5.69020E+00",
          "Error": "0.113804"
        },
        {
          "X": "256",
          "Y": "4.13000E+00",
          "Error": "0.08259999999999999"
        },
        {
          "X": "512",
          "Y": "3.41000E+00",
          "Error": "0"
        },
        {
          "X": "1024",
          "Y": "3.10700E+00",
          "Error": "0"
        }
      ],
      "thp2": [
        {
          "X": "1",
          "Y": "2.85675E+02",
          "Error": "2.8567500000000003"
        },
        {
          "X": "2",
          "Y": "1.39820E+02",
          "Error": "6.991"
        },
        {
          "X": "4",
          "Y": "6.85340E+01",
          "Error": "4.11204"
        },
        {
          "X": "8",
          "Y": "3.64100E+01",
          "Error": "1.4564"
        },
        {
          "X": "16",
          "Y": "1.95780E+01",
          "Error": "0.78312"
        },
        {
          "X": "32",
          "Y": "1.26360E+01",
          "Error": "0.25272"
        },
        {
          "X": "64",
          "Y": "8.23320E+00",
          "Error": "0.082332"
        },
        {
          "X": "128",
          "Y": "5.65600E+00",
          "Error": "0.11312"
        },
        {
          "X": "256",
          "Y": "3.89540E+00",
          "Error": "0.077908"
        },
        {
          "X": "512",
          "Y": "3.08240E+00",
          "Error": "0"
        },
        {
          "X": "1024",
          "Y": "2.73640E+00",
          "Error": "0.027364000000000003"
        }
      ]
    },
    "Options": {
      "xAxisName": "buf",
      "xAxisType": "log"
    }
  },
  {
    "ID": "f1750f2d7f20067645929beae0623cd5242e19801974a7f8d93e7b5be0e658e4",
    "Name": "ChanThroughput pCnt=2 cCnt=8",
    "YAxisLabel": "time/op (ns/op)",
    "Cases": {
      "standard": [
        {
          "X": "1",
          "Y": "2.04400E+02",
          "Error": "2.044"
        },
        {
          "X": "2",
          "Y": "1.84540E+02",
          "Error": "0"
        },
        {
          "X": "4",
          "Y": "1.63520E+02",
          "Error": "0"
        },
        {
          "X": "8",
          "Y": "1.40920E+02",
          "Error": "0"
        },
        {
          "X": "16",
          "Y": "1.25900E+02",
          "Error": "0"
        },
        {
          "X": "32",
          "Y": "1.23260E+02",
          "Error": "1.2326000000000001"
        },
        {
          "X": "64",
          "Y": "1.06460E+02",
          "Error": "1.0646"
        },
        {
          "X": "128",
          "Y": "1.01060E+02",
          "Error": "1.0106"
        },
        {
          "X": "256",
          "Y": "9.46600E+01",
          "Error": "0"
        },
        {
          "X": "512",
          "Y": "8.93200E+01",
          "Error": "0"
        },
        {
          "X": "1024",
          "Y": "8.83280E+01",
          "Error": "0.8832800000000001"
        }
      ],
      "thp": [
        {
          "X": "1",
          "Y": "2.94800E+02",
          "Error": "2.948"
        },
        {
          "X": "2",
          "Y": "1.58820E+02",
          "Error": "1.5882"
        },
        {
          "X": "4",
          "Y": "7.79200E+01",
          "Error": "7.0127999999999995"
        },
        {
          "X": "8",
          "Y": "4.32660E+01",
          "Error": "3.8939399999999997"
        },
        {
          "X": "16",
          "Y": "2.96080E+01",
          "Error": "2.66472"
        },
        {
          "X": "32",
          "Y": "2.16540E+01",
          "Error": "1.73232"
        },
        {
          "X": "64",
          "Y": "1.48840E+01",
          "Error": "0.59536"
        },
        {
          "X": "128",
          "Y": "4.47175E+00",
          "Error": "0.17887"
        },
        {
          "X": "256",
          "Y": "3.28860E+00",
          "Error": "0.13154400000000002"
        },
        {
          "X": "512",
          "Y": "3.45460E+00",
          "Error": "0.069092"
        },
        {
          "X": "1024",
          "Y": "2.96840E+00",
          "Error": "0.029684"
        }
      ],
      "thp2": [
        {
          "X": "1",
          "Y": "3.82160E+02",
          "Error": "15.2864"
        },
        {
          "X": "2",
          "Y": "1.91960E+02",
          "Error": "11.5176"
        },
        {
          "X": "4",
          "Y": "9.80680E+01",
          "Error": "4.9034"
        },
        {
          "X": "8",
          "Y": "5.22820E+01",
          "Error": "3.1369199999999995"
        },
        {
          "X": "16",
          "Y": "2.75720E+01",
          "Error": "1.6543199999999998"
        },
        {
          "X": "32",
          "Y": "1.51860E+01",
          "Error": "0.91116"
        },
        {
          "X": "64",
          "Y": "8.78680E+00",
          "Error": "0.26360399999999995"
        },
        {
          "X": "128",
          "Y": "5.52500E+00",
          "Error": "0.3315"
        },
        {
          "X": "256",
          "Y": "3.79820E+00",
          "Error": "0.037982"
        },
        {
          "X": "512",
          "Y": "2.81060E+00",
          "Error": "0.08431799999999999"
        },
        {
          "X": "1024",
          "Y": "2.27220E+00",
          "Error": "0.068166"
        }
      ]
    },
    "Options": {
      "xAxisName": "buf",
      "xAxisType": "log"
    }
  },
  {
    "ID": "e661270a8601b4cb2aabf3734fb1ff0e8b5db20debd067daa4fbb118c34891cc",
    "Name": "ChanThroughput pCnt=4 cCnt=8",
    "YAxisLabel": "time/op (ns/op)",
    "Cases": {
      "standard": [
        {
          "X": "1",
          "Y": "2.35200E+02",
          "Error": "0"
        },
        {
          "X": "2",
          "Y": "2.06540E+02",
          "Error": "0"
        },
        {
          "X": "4",
          "Y": "1.76420E+02",
          "Error": "5.292599999999999"
        },
        {
          "X": "8",
          "Y": "1.49940E+02",
          "Error": "0"
        },
        {
          "X": "16",
          "Y": "1.29275E+02",
          "Error": "0"
        },
        {
          "X": "32",
          "Y": "1.22640E+02",
          "Error": "4.9056"
        },
        {
          "X": "64",
          "Y": "1.05100E+02",
          "Error": "0"
        },
        {
          "X": "128",
          "Y": "9.79860E+01",
          "Error": "0.9798600000000001"
        },
        {
          "X": "256",
          "Y": "8.97720E+01",
          "Error": "0.8977200000000001"
        },
        {
          "X": "512",
          "Y": "8.35960E+01",
          "Error": "0.83596"
        },
        {
          "X": "1024",
          "Y": "8.09900E+01",
          "Error": "1.6198"
        }
      ],
      "thp": [
        {
          "X": "1",
          "Y": "3.02040E+02",
          "Error": "6.040800000000001"
        },
        {
          "X": "2",
          "Y": "1.60560E+02",
          "Error": "9.6336"
        },
        {
          "X": "4",
          "Y": "8.48000E+01",
          "Error": "4.24"
        },
        {
          "X": "8",
          "Y": "3.74175E+01",
          "Error": "0.374175"
        },
        {
          "X": "16",
          "Y": "2.43140E+01",
          "Error": "1.94512"
        },
        {
          "X": "32",
          "Y": "1.35500E+01",
          "Error": "0.9485000000000001"
        },
        {
          "X": "64",
          "Y": "7.52620E+00",
          "Error": "0.225786"
        },
        {
          "X": "128",
          "Y": "4.32120E+00",
          "Error": "0.129636"
        },
        {
          "X": "256",
          "Y": "3.79060E+00",
          "Error": "0.151624"
        },
        {
          "X": "512",
          "Y": "3.56080E+00",
          "Error": "0.071216"
        },
        {
          "X": "1024",
          "Y": "2.97340E+00",
          "Error": "0.029734"
        }
      ],
      "thp2": [
        {
          "X": "1",
          "Y": "3.78060E+02",
          "Error": "22.6836"
        },
        {
          "X": "2",
          "Y": "1.92820E+02",
          "Error": "11.569199999999999"
        },
        {
          "X": "4",
          "Y": "9.48400E+01",
          "Error": "2.8452"
        },
        {
          "X": "8",
          "Y": "4.94920E+01",
          "Error": "4.45428"
        },
        {
          "X": "16",
          "Y": "2.47740E+01",
          "Error": "2.4774000000000003"
        },
        {
          "X": "32",
          "Y": "1.35980E+01",
          "Error": "1.0878400000000001"
        },
        {
          "X": "64",
          "Y": "8.01500E+00",
          "Error": "0.24045"
        },
        {
          "X": "128",
          "Y": "5.53680E+00",
          "Error": "0.05536800000000001"
        },
        {
          "X": "256",
          "Y": "3.85360E+00",
          "Error": "0.038536"
        },
        {
          "X": "512",
          "Y": "2.81940E+00",
          "Error": "0.028194"
        },
        {
          "X": "1024",
          "Y": "2.04500E+00",
          "Error": "0.0409"
        }
      ]
    },
    "Options": {
      "xAxisName": "buf",
      "xAxisType": "log"
    }
  },
  {
    "ID": "e0edf700b1fb4fe9599d2412f69406491bba54dabc493a24d443d8be75829e7f",
    "Name": "ChanThroughput pCnt=8 cCnt=8",
    "YAxisLabel": "time/op (ns/op)",
    "Cases": {
      "standard": [
        {
          "X": "1",
          "Y": "1.96640E+02",
          "Error": "0"
        },
        {
          "X": "2",
          "Y": "1.69980E+02",
          "Error": "5.099399999999999"
        },
        {
          "X": "4",
          "Y": "1.44160E+02",
          "Error": "10.0912"
        },
        {
          "X": "8",
          "Y": "1.22780E+02",
          "Error": "3.6834"
        },
        {
          "X": "16",
          "Y": "1.06580E+02",
          "Error": "1.0658"
        },
        {
          "X": "32",
          "Y": "1.04780E+02",
          "Error": "1.0478"
        },
        {
          "X": "64",
          "Y": "8.93720E+01",
          "Error": "0"
        },
        {
          "X": "128",
          "Y": "8.65480E+01",
          "Error": "0.86548"
        },
        {
          "X": "256",
          "Y": "8.24280E+01",
          "Error": "0.82428"
        },
        {
          "X": "512",
          "Y": "8.00320E+01",
          "Error": "0.80032"
        },
        {
          "X": "1024",
          "Y": "7.87680E+01",
          "Error": "1.57536"
        }
      ],
      "thp": [
        {
          "X": "1",
          "Y": "2.66420E+02",
          "Error": "2.6642"
        },
        {
          "X": "2",
          "Y": "1.30240E+02",
          "Error": "22.140800000000002"
        },
        {
          "X": "4",
          "Y": "7.08280E+01",
          "Error": "14.165600000000001"
        },
        {
          "X": "8",
          "Y": "3.97160E+01",
          "Error": "1.19148"
        },
        {
          "X": "16",
          "Y": "2.18060E+01",
          "Error": "1.30836"
        },
        {
          "X": "32",
          "Y": "1.21740E+01",
          "Error": "0.73044"
        },
        {
          "X": "64",
          "Y": "7.07500E+00",
          "Error": "0.21225"
        },
        {
          "X": "128",
          "Y": "4.51040E+00",
          "Error": "0.22552"
        },
        {
          "X": "256",
          "Y": "3.99700E+00",
          "Error": "0.27979000000000004"
        },
        {
          "X": "512",
          "Y": "3.52300E+00",
          "Error": "0.07046000000000001"
        },
        {
          "X": "1024",
          "Y": "3.09700E+00",
          "Error": "0.06194"
        }
      ],
      "thp2": [
        {
          "X": "1",
          "Y": "3.39200E+02",
          "Error": "20.352"
        },
        {
          "X": "2",
          "Y": "1.70760E+02",
          "Error": "13.6608"
        },
        {
          "X": "4",
          "Y": "8.36600E+01",
          "Error": "6.6928"
        },
        {
          "X": "8",
          "Y": "4.37840E+01",
          "Error": "3.06488"
        },
        {
          "X": "16",
          "Y": "2.32280E+01",
          "Error": "1.8582400000000001"
        },
        {
          "X": "32",
          "Y": "1.22840E+01",
          "Error": "0.36852"
        },
        {
          "X": "64",
          "Y": "7.71640E+00",
          "Error": "0.077164"
        },
        {
          "X": "128",
          "Y": "5.18960E+00",
          "Error": "0.10379200000000001"
        },
        {
          "X": "256",
          "Y": "3.71200E+00",
          "Error": "0.07424"
        },
        {
          "X": "512",
          "Y": "2.67420E+00",
          "Error": "0.026742"
        },
        {
          "X": "1024",
          "Y": "1.95980E+00",
          "Error": "0.039196"
        }
      ]
    },
    "Options": {
      "xAxisName": "buf",
      "xAxisType": "log"
    }
  },
  {
    "ID": "07dab9bdeb8c46c8966c59e338a76f42a4d6c69811eb5a3113e4d1f3d29d5976",
    "Name": "ChanThroughput pCnt=16 cCnt=8",
    "YAxisLabel": "time/op (ns/op)",
    "Cases": {
      "standard": [
        {
          "X": "1",
          "Y": "2.03620E+02",
          "Error": "0"
        },
        {
          "X": "2",
          "Y": "1.78600E+02",
          "Error": "1.786"
        },
        {
          "X": "4",
          "Y": "1.53100E+02",
          "Error": "4.593"
        },
        {
          "X": "8",
          "Y": "1.28875E+02",
          "Error": "1.28875"
        },
        {
          "X": "16",
          "Y": "1.12480E+02",
          "Error": "1.1248"
        },
        {
          "X": "32",
          "Y": "1.04100E+02",
          "Error": "4.164"
        },
        {
          "X": "64",
          "Y": "9.25280E+01",
          "Error": "0.9252800000000001"
        },
        {
          "X": "128",
          "Y": "8.74880E+01",
          "Error": "3.49952"
        },
        {
          "X": "256",
          "Y": "8.26760E+01",
          "Error": "0.82676"
        },
        {
          "X": "512",
          "Y": "8.09440E+01",
          "Error": "0.80944"
        },
        {
          "X": "1024",
          "Y": "7.74800E+01",
          "Error": "1.5496"
        }
      ],
      "thp": [
        {
          "X": "1",
          "Y": "2.76840E+02",
          "Error": "5.5367999999999995"
        },
        {
          "X": "2",
          "Y": "1.28180E+02",
          "Error": "17.945200000000003"
        },
        {
          "X": "4",
          "Y": "6.60880E+01",
          "Error": "9.25232"
        },
        {
          "X": "8",
          "Y": "3.75500E+01",
          "Error": "6.008"
        },
        {
          "X": "16",
          "Y": "2.13200E+01",
          "Error": "1.4924000000000002"
        },
        {
          "X": "32",
          "Y": "1.28760E+01",
          "Error": "1.0300799999999999"
        },
        {
          "X": "64",
          "Y": "7.29360E+00",
          "Error": "0.583488"
        },
        {
          "X": "128",
          "Y": "4.65780E+00",
          "Error": "0.23289"
        },
        {
          "X": "256",
          "Y": "4.16000E+00",
          "Error": "0.16640000000000002"
        },
        {
          "X": "512",
          "Y": "3.61520E+00",
          "Error": "0.07230400000000001"
        },
        {
          "X": "1024",
          "Y": "3.18720E+00",
          "Error": "0.031872"
        }
      ],
      "thp2": [
        {
          "X": "1",
          "Y": "3.31960E+02",
          "Error": "9.958799999999998"
        },
        {
          "X": "2",
          "Y": "1.65280E+02",
          "Error": "11.569600000000001"
        },
        {
          "X": "4",
          "Y": "8.39160E+01",
          "Error": "3.35664"
        },
        {
          "X": "8",
          "Y": "4.33060E+01",
          "Error": "2.1653"
        },
        {
          "X": "16",
          "Y": "2.18920E+01",
          "Error": "0.43784"
        },
        {
          "X": "32",
          "Y": "1.26340E+01",
          "Error": "0.6317"
        },
        {
          "X": "64",
          "Y": "7.38340E+00",
          "Error": "0.516838"
        },
        {
          "X": "128",
          "Y": "5.24600E+00",
          "Error": "0.10492000000000001"
        },
        {
          "X": "256",
          "Y": "3.74560E+00",
          "Error": "0.037456"
        },
        {
          "X": "512",
          "Y": "2.62640E+00",
          "Error": "0.026264"
        },
        {
          "X": "1024",
          "Y": "1.94360E+00",
          "Error": "0.058308"
        }
      ]
    },
    "Options": {
      "xAxisName": "buf",
      "xAxisType": "log"
    }
  }
]`;
    render(input)
</script>
</body>
</html>
